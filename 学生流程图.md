sequenceDiagram
    participant Student
    participant Frontend
    participant Backend
    participant DeepSeekAPI
    participant Database
    
    Student->>Frontend: "我想做关于医疗AI的项目，最好有可视化部分"
    Frontend->>Backend: POST /api/chat {message: "医疗AI...", session_id: "abc123"}
    
    Backend->>DeepSeekAPI: 第一轮调用（需求解析）
    Note right of Backend: Prompt包含:<br/>- 指令模板<br/>- 学生原始输入<br/>- 可用领域标签
    DeepSeekAPI-->>Backend: 结构化需求<br/>{fields: ["医疗健康","计算机视觉"], keywords: ["可视化"]}
    
    Backend->>Database: SQL查询<br/>SELECT * FROM projects WHERE field IN ('医疗健康','计算机视觉')
    Database-->>Backend: 返回所有相关项目
    
    Backend->>DeepSeekAPI: 第二轮调用（项目匹配）
    Note right of Backend: 发送:<br/>- 结构化需求<br/>- 项目原始数据<br/>- 排序指令
    DeepSeekAPI-->>Backend: 格式化响应<br/>{ranked_projects: [id1,id3,id2], reasoning: "项目A最适合因为..."}
    
    Backend->>Database: 获取TOP3详情<br/>SELECT * FROM projects WHERE id IN (1,3,2)
    Database-->>Backend: 完整项目数据
    
    Backend->>Frontend: 结构化响应<br/>{type: "project_matches", projects: [...]}
    Frontend->>Student: 显示卡片式结果
